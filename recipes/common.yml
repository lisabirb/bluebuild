modules:
  - type: files
    files:
      - source: system
        destination: / # copies files/system/* (* means everything inside it) into your image's root folder /
  - type: bling
    install:
      - rpmfusion
  # disable fedora flatpak service then set up flathub
  - type: script
    snippets:
      - "systemctl disable flatpak-add-fedora-repos.service"
      - "flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo"
  # librewolf repo
  - type: script
    snippets:
      - "curl -fsSL https://repo.librewolf.net/librewolf.repo | tee /etc/yum.repos.d/librewolf.repo"
  - type: dnf
    repos:
      copr:
        - atim/starship
        - ublue-os/packages
        - secureblue/bubblejail
    install:
      packages:
        - sxiv
        - GraphicsMagick
        - librewolf
        - ffmpeg
        - brightnessctl
        - neovim
        - iotop
        - flatpak-builder
        - fastfetch
        - fish
        - bubblejail
        - syncthing
        - NetworkManager-tui
        - starship
        - btop
      allow-erasing: true
    group-install:
      with-optional: true
      packages:
        - virtualization
        - base-x
  - type: brew
  - type: script
    snippets:
      - "dnf -y install uupd"
      - "systemctl enable uupd.timer"

  #  - type: default-flatpaks
  #    configurations:
  #      - notify: true # Send notification after install/uninstall is finished (true/false)
  #        scope: system
  #        # If no repo information is specified, Flathub will be used by default
  #        install: # system flatpaks we want all users to have and not remove
  #          - org.mozilla.firefox
  #          - org.gnome.Loupe
  #      - scope: user # Also add Flathub user repo, but no user packages

  - type: signing # this sets up the proper policy & signing files for signed images to work fully

---
name: desktop-trinity
description: Trinity desktop image
base-image: quay.io/fedora-ostree-desktops/base-atomic
image-version: 42
modules:
  - from-file: common.yml
  - from-file: x11-utilities.yml
  - type: script
    snippets:
      - "rpm -Uvh http://mirror.ppa.trinitydesktop.org/trinity/rpm/f42/trinity-r14/RPMS/noarch/trinity-repo-14.1.4-1.fc42.noarch.rpm"
      - "rm /opt"
      - "mkdir /opt"
  - type: dnf
    install:
      packages:
        - trinity-desktop-all
  - type: script
    snippets:
      # Unfortunately, SELinux must be disabled in order for TDM (the Trinity login manager) to work
      - "sed -i 's/SELINUX=enforcing/SELINUX=permissive/' /etc/selinux/config"
      - "systemctl enable tdm"
  - from-file: exclusions.yml
